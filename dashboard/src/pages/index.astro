---
import Layout from '../layouts/Layout.astro';
import fs from 'node:fs';
import path from 'node:path';

// Load component index
const indexPath = path.join(process.cwd(), 'src', 'data', 'components', 'index.json');
let componentData = { categories: [], components: [] };

try {
  componentData = JSON.parse(fs.readFileSync(indexPath, 'utf-8'));
} catch (e) {
  console.warn('Components index not found');
}

// Status badge colors
const statusConfig = {
  stable: { bg: '#dcfce7', text: '#166534', label: 'Stable' },
  beta: { bg: '#fef3c7', text: '#92400e', label: 'Beta' },
  draft: { bg: '#e0e7ff', text: '#3730a3', label: 'Draft' },
  deprecated: { bg: '#fee2e2', text: '#991b1b', label: 'Deprecated' }
};

// Group components by category
const componentsByCategory = componentData.categories.map(category => ({
  ...category,
  items: componentData.components.filter(c => c.category === category.id)
}));

// Stats
const totalComponents = componentData.components.length;
const stableComponents = componentData.components.filter(c => c.status === 'stable').length;
const draftComponents = componentData.components.filter(c => c.status === 'draft').length;

// CSS component preview types ‚Äî lightweight visual representations
const previewType: Record<string, string> = {
  'button': 'button',
  'dropdown': 'dropdown',
  'input': 'input',
  'checkbox': 'checkbox',
  'radio': 'radio',
  'radiogroup': 'radiogroup',
  'typeahead-single-select': 'select',
  'typeahead-multi-select': 'multiselect',
  'modal': 'modal',
  'drawer': 'drawer',
  'details': 'details',
  'divider': 'divider',
  'badge': 'badge',
  'tag': 'tag',
  'icon': 'icon',
  'tooltip': 'tooltip',
  'popover': 'popover',
  'popup': 'popup',
  'select': 'select',
  'toast': 'toast',
  'toggle': 'toggle',
};
---

<Layout title="Components">
  <div class="components-page">
    <!-- Hero Section -->
    <header class="page-hero">
      <div class="hero-content">
        <h1>Components</h1>
        <p class="hero-description">
          A comprehensive library of reusable UI components designed for consistency, 
          accessibility, and flexibility across all products.
        </p>
        
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="stat-value">{totalComponents}</span>
            <span class="stat-label">Components</span>
          </div>
          <div class="hero-stat">
            <span class="stat-value">{stableComponents}</span>
            <span class="stat-label">Stable</span>
          </div>
          <div class="hero-stat">
            <span class="stat-value">{draftComponents}</span>
            <span class="stat-label">In Progress</span>
          </div>
        </div>
      </div>
      
      <div class="hero-visual">
        <div class="visual-grid">
          <div class="visual-item">
            <div class="visual-button">Button</div>
          </div>
          <div class="visual-item">
            <div class="visual-input" data-placeholder="Input field"></div>
          </div>
          <div class="visual-item">
            <div class="visual-toggle"></div>
          </div>
          <div class="visual-item">
            <div class="visual-card"></div>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Quick Start -->
    <section class="quick-start">
      <h2>Quick Start</h2>
      <div class="quick-start-cards">
        <a href="/tokens" class="quick-card">
          <div class="quick-icon">üé®</div>
          <h3>Design Tokens</h3>
          <p>Explore colors, typography, spacing, and other foundational values</p>
        </a>
        <a href="/decisions" class="quick-card">
          <div class="quick-icon">üß≠</div>
          <h3>Decision Trees</h3>
          <p>Interactive guides to help you choose the right component</p>
        </a>
        <a href="/docs" class="quick-card">
          <div class="quick-icon">üìö</div>
          <h3>Documentation</h3>
          <p>Implementation guides, patterns, and best practices</p>
        </a>
      </div>
    </section>
    
    <!-- Search & Filter (Sticky on scroll) -->
    <div class="search-section-wrapper" id="search-wrapper">
      <section class="search-section" id="search-section">
        <input 
          type="search" 
          id="component-search"
          placeholder="Search components..."
          class="search-input"
        />
        
        <div class="filter-pills">
          <button class="filter-pill active" data-filter="all">All</button>
          <button class="filter-pill" data-filter="stable">Stable</button>
          <button class="filter-pill" data-filter="draft">In Progress</button>
        </div>
      </section>
    </div>
    
    <!-- Component Categories -->
    <div class="categories">
      {componentsByCategory.map(category => (
        <section class="category-section" data-category={category.id}>
          <div class="category-header">
            <h2>{category.name}</h2>
            <p>{category.description}</p>
          </div>
          
          <div class="component-grid">
            {category.items.map(component => {
              const status = statusConfig[component.status] || statusConfig.draft;
              return (
                <a href={`/components/${component.id}`} class="component-card" data-status={component.status}>
                  <div class="card-preview" data-preview={previewType[component.id] || 'generic'}>
                    <div class="preview-mock">
                      {previewType[component.id] === 'button' && (
                        <div class="mock-button-group">
                          <span class="mock-btn primary">Button</span>
                          <span class="mock-btn outline">Secondary</span>
                        </div>
                      )}
                      {previewType[component.id] === 'input' && (
                        <div class="mock-input-wrap">
                          <span class="mock-label">Label</span>
                          <span class="mock-input">Enter value...</span>
                        </div>
                      )}
                      {previewType[component.id] === 'checkbox' && (
                        <div class="mock-check-group">
                          <span class="mock-check checked"><span class="checkmark">‚úì</span> Option A</span>
                          <span class="mock-check"><span class="checkbox"></span> Option B</span>
                          <span class="mock-check checked"><span class="checkmark">‚úì</span> Option C</span>
                        </div>
                      )}
                      {previewType[component.id] === 'radio' && (
                        <div class="mock-check-group">
                          <span class="mock-radio selected"><span class="radio-dot"></span> Choice 1</span>
                          <span class="mock-radio"><span class="radio-empty"></span> Choice 2</span>
                          <span class="mock-radio"><span class="radio-empty"></span> Choice 3</span>
                        </div>
                      )}
                      {previewType[component.id] === 'radiogroup' && (
                        <div class="mock-check-group">
                          <span class="mock-radio selected"><span class="radio-dot"></span> Option A</span>
                          <span class="mock-radio"><span class="radio-empty"></span> Option B</span>
                        </div>
                      )}
                      {previewType[component.id] === 'badge' && (
                        <div class="mock-badge-group">
                          <span class="mock-badge green">Active</span>
                          <span class="mock-badge blue">New</span>
                          <span class="mock-badge amber">Pending</span>
                          <span class="mock-badge red">Error</span>
                        </div>
                      )}
                      {previewType[component.id] === 'tag' && (
                        <div class="mock-tag-group">
                          <span class="mock-tag">Design <span class="tag-x">&times;</span></span>
                          <span class="mock-tag">React <span class="tag-x">&times;</span></span>
                          <span class="mock-tag">UI <span class="tag-x">&times;</span></span>
                        </div>
                      )}
                      {previewType[component.id] === 'dropdown' && (
                        <div class="mock-dropdown">
                          <span class="mock-btn primary">Actions <span class="caret">‚ñæ</span></span>
                          <div class="mock-menu">
                            <span class="mock-menu-item active">Edit</span>
                            <span class="mock-menu-item">Duplicate</span>
                            <span class="mock-menu-divider"></span>
                            <span class="mock-menu-item danger">Delete</span>
                          </div>
                        </div>
                      )}
                      {(previewType[component.id] === 'select' || previewType[component.id] === 'multiselect') && (
                        <div class="mock-input-wrap">
                          <span class="mock-label">{previewType[component.id] === 'multiselect' ? 'Multi select' : 'Select'}</span>
                          <span class="mock-input">Choose option... <span class="caret">‚ñæ</span></span>
                        </div>
                      )}
                      {previewType[component.id] === 'modal' && (
                        <div class="mock-modal">
                          <div class="mock-modal-box">
                            <span class="mock-modal-title">Confirm</span>
                            <span class="mock-modal-body"></span>
                            <div class="mock-modal-footer">
                              <span class="mock-btn-sm outline">Cancel</span>
                              <span class="mock-btn-sm primary">OK</span>
                            </div>
                          </div>
                        </div>
                      )}
                      {previewType[component.id] === 'drawer' && (
                        <div class="mock-drawer">
                          <div class="mock-drawer-backdrop"></div>
                          <div class="mock-drawer-panel">
                            <span class="mock-drawer-title">Panel</span>
                            <span class="mock-drawer-line"></span>
                            <span class="mock-drawer-line short"></span>
                          </div>
                        </div>
                      )}
                      {previewType[component.id] === 'tooltip' && (
                        <div class="mock-tooltip-wrap">
                          <span class="mock-tooltip-trigger">Hover me</span>
                          <span class="mock-tooltip-bubble">Tooltip text</span>
                        </div>
                      )}
                      {previewType[component.id] === 'popover' && (
                        <div class="mock-tooltip-wrap">
                          <span class="mock-btn-sm primary">Trigger</span>
                          <span class="mock-popover-bubble">
                            <span class="mock-popover-title">Popover</span>
                            <span class="mock-drawer-line"></span>
                          </span>
                        </div>
                      )}
                      {previewType[component.id] === 'popup' && (
                        <div class="mock-tooltip-wrap">
                          <span class="mock-btn-sm outline">Click</span>
                          <span class="mock-popover-bubble">
                            <span class="mock-drawer-line"></span>
                            <span class="mock-drawer-line short"></span>
                          </span>
                        </div>
                      )}
                      {previewType[component.id] === 'icon' && (
                        <div class="mock-icon-group">
                          <span class="mock-icon">‚òÖ</span>
                          <span class="mock-icon">‚ô¶</span>
                          <span class="mock-icon">‚óè</span>
                          <span class="mock-icon">‚ñ≤</span>
                          <span class="mock-icon">‚óÜ</span>
                        </div>
                      )}
                      {previewType[component.id] === 'divider' && (
                        <div class="mock-divider-wrap">
                          <span class="mock-drawer-line"></span>
                          <span class="mock-divider-line"></span>
                          <span class="mock-drawer-line short"></span>
                        </div>
                      )}
                      {previewType[component.id] === 'details' && (
                        <div class="mock-details">
                          <span class="mock-details-summary">‚ñ∏ Section title</span>
                          <span class="mock-details-open">‚ñæ Open section</span>
                          <div class="mock-details-content">
                            <span class="mock-drawer-line"></span>
                            <span class="mock-drawer-line short"></span>
                          </div>
                        </div>
                      )}
                      {previewType[component.id] === 'toast' && (
                        <div class="mock-toast">
                          <span class="mock-toast-icon">‚úì</span>
                          <span class="mock-toast-text">Success message</span>
                        </div>
                      )}
                      {previewType[component.id] === 'toggle' && (
                        <div class="mock-toggle-group">
                          <span class="mock-toggle on"><span class="toggle-knob"></span></span>
                          <span class="mock-toggle off"><span class="toggle-knob"></span></span>
                        </div>
                      )}
                      {!previewType[component.id] && (
                        <span class="preview-letter">{component.name[0]}</span>
                      )}
                    </div>
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>{component.name}</h3>
                      <span 
                        class="status-badge" 
                        style={`background: ${status.bg}; color: ${status.text}`}
                      >
                        {status.label}
                      </span>
                    </div>
                    <p>{component.description}</p>
                    {component.storybook && (
                      <span class="storybook-badge">
                        <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" style="flex-shrink: 0;">
                          <path d="M16.34 2.004l-.354-1.953-.01-.001a.498.498 0 0 0-.553.428l-.247 1.489-1.084-.126a.5.5 0 0 0-.116.993l1.02.119-.36 2.169a.5.5 0 0 0 .985.163l.396-2.388L20.4 3.52a.502.502 0 0 0 .415-.572.5.5 0 0 0-.572-.415l-3.903-.529zM14.5 8.5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4.5 4.5c0 4.418-3.582 8-8 8s-8-3.582-8-8c0-4.418 3.582-8 8-8a7.96 7.96 0 0 1 4.897 1.688l-.003.003A7.963 7.963 0 0 1 19 13z"/>
                        </svg>
                        Storybook
                      </span>
                    )}
                  </div>
                </a>
              );
            })}
          </div>
        </section>
      ))}
    </div>
    
    <!-- Empty State (shown when no results) -->
    <div class="empty-state" id="empty-state" style="display: none;">
      <div class="empty-icon">üîç</div>
      <h3>No components found</h3>
      <p>Try adjusting your search or filter criteria</p>
    </div>
    
    <!-- Contribution CTA -->
    <section class="contribution-section">
      <h2>Want to contribute?</h2>
      <p>
        Have a component request or found an issue? 
        We welcome contributions from all teams.
      </p>
      <div class="contribution-actions">
        <a href="https://github.com/ark-design/components/issues/new" class="contribution-btn primary">
          Request Component
        </a>
        <a href="/docs/contributing" class="contribution-btn secondary">
          Contribution Guide
        </a>
      </div>
    </section>
  </div>
</Layout>

<script>
  const searchInput = document.getElementById('component-search') as HTMLInputElement;
  const filterPills = document.querySelectorAll('.filter-pill');
  const componentCards = document.querySelectorAll('.component-card');
  const categorySections = document.querySelectorAll('.category-section');
  const emptyState = document.getElementById('empty-state');
  
  let activeFilter = 'all';
  
  function applyFilters() {
    const searchQuery = searchInput?.value.toLowerCase() || '';
    let visibleCount = 0;
    
    componentCards.forEach(card => {
      const cardStatus = card.getAttribute('data-status');
      const cardText = card.textContent?.toLowerCase() || '';
      
      const matchesSearch = searchQuery === '' || cardText.includes(searchQuery);
      const matchesFilter = activeFilter === 'all' || cardStatus === activeFilter;
      
      const isVisible = matchesSearch && matchesFilter;
      (card as HTMLElement).style.display = isVisible ? '' : 'none';
      
      if (isVisible) visibleCount++;
    });
    
    // Hide empty categories
    categorySections.forEach(section => {
      const visibleCards = section.querySelectorAll('.component-card:not([style*="display: none"])');
      (section as HTMLElement).style.display = visibleCards.length > 0 ? '' : 'none';
    });
    
    // Show/hide empty state
    if (emptyState) {
      emptyState.style.display = visibleCount === 0 ? 'block' : 'none';
    }
  }
  
  searchInput?.addEventListener('input', applyFilters);
  
  filterPills.forEach(pill => {
    pill.addEventListener('click', () => {
      activeFilter = pill.getAttribute('data-filter') || 'all';
      filterPills.forEach(p => p.classList.remove('active'));
      pill.classList.add('active');
      applyFilters();
    });
  });
  
  // Sticky search bar behavior (Airbnb-style)
  const searchWrapper = document.getElementById('search-wrapper');
  const quickStartSection = document.querySelector('.quick-start');
  
  if (searchWrapper && quickStartSection) {
    // Create a sentinel element to detect when to make search bar sticky
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          // When quick-start section leaves the viewport, make search sticky
          if (!entry.isIntersecting) {
            searchWrapper.classList.add('is-stuck');
          } else {
            searchWrapper.classList.remove('is-stuck');
          }
        });
      },
      {
        // Trigger when quick-start bottom edge passes the sticky position (68px from top)
        rootMargin: '-68px 0px 0px 0px',
        threshold: 0
      }
    );
    
    observer.observe(quickStartSection);
  }
  
</script>

<style>
  .components-page {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
  
  /* Hero Section */
  .page-hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
    padding: 2rem 0;
  }
  
  @media (max-width: 768px) {
    .page-hero {
      grid-template-columns: 1fr;
    }
    
    .hero-visual {
      display: none;
    }
  }
  
  .hero-content h1 {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--brand-primary, #18181b) 0%, var(--brand-accent, #52525b) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .hero-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary, #52525b);
    line-height: 1.7;
    margin-bottom: 2rem;
  }
  
  .hero-stats {
    display: flex;
    gap: 2rem;
  }
  
  .hero-stat {
    display: flex;
    flex-direction: column;
  }
  
  .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-primary, #18181b);
  }
  
  .stat-label {
    font-size: 0.875rem;
    color: var(--color-text-muted, #71717a);
  }
  
  .hero-visual {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .visual-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    transform: rotate(-5deg);
  }
  
  .visual-item {
    padding: 1rem;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }
  
  .visual-button {
    padding: 0.625rem 1.25rem;
    background: var(--brand-primary, #18181b);
    color: white;
    border-radius: var(--brand-radius-button, 8px);
    font-weight: 500;
    font-size: 0.875rem;
    text-align: center;
  }
  
  .visual-input {
    padding: 0.625rem 1rem;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 8px;
    color: var(--color-text-muted, #a1a1aa);
    font-size: 0.875rem;
  }
  
  .visual-input::before {
    content: attr(data-placeholder);
  }
  
  .visual-toggle {
    width: 44px;
    height: 24px;
    background: var(--brand-primary, #18181b);
    border-radius: 12px;
    position: relative;
  }
  
  .visual-toggle::after {
    content: '';
    position: absolute;
    right: 2px;
    top: 2px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
  }
  
  .visual-card {
    width: 80px;
    height: 60px;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 8px;
    position: relative;
  }
  
  .visual-card::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    height: 8px;
    background: var(--color-border-default, #e4e4e7);
    border-radius: 4px;
  }
  
  /* Quick Start */
  .quick-start {
    padding: 2rem;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 16px;
  }
  
  .quick-start h2 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .quick-start-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  
  @media (max-width: 640px) {
    .quick-start-cards {
      grid-template-columns: 1fr;
    }
  }
  
  .quick-card {
    display: block;
    padding: 1.25rem;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .quick-card:hover {
    border-color: var(--brand-primary, #18181b);
    box-shadow: var(--brand-shadow-card, 0 4px 12px rgba(0, 0, 0, 0.08));
    transform: translateY(-2px);
  }
  
  .quick-icon {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .quick-card h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary, #18181b);
    margin-bottom: 0.375rem;
  }
  
  .quick-card p {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #52525b);
    margin: 0;
    line-height: 1.5;
  }
  
  /* Search Section - Sticky on scroll */
  .search-section-wrapper {
    position: sticky;
    top: 68px; /* Below the main header */
    z-index: 90;
    margin: 0 -1.5rem; /* Extend to edges */
    padding: 0.75rem 1.5rem;
    background: var(--color-surface-primary, #fff);
    transition: all 0.2s ease;
  }
  
  .search-section-wrapper.is-stuck {
    background: var(--color-surface-primary, #fff);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid var(--color-border-default, #e4e4e7);
  }
  
  [data-theme="dark"] .search-section-wrapper.is-stuck {
    background: var(--semantic-neutral-bg-default, #000);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border-bottom-color: var(--semantic-neutral-border-default, #2e3033);
  }
  
  .search-section {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    max-width: 1280px;
    margin: 0 auto;
  }
  
  .search-input {
    flex: 1;
    min-width: 200px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: var(--brand-radius-button, 8px);
    background: var(--color-surface-primary, #fff);
    color: var(--color-text-primary, #18181b);
    transition: all 0.15s ease;
  }
  
  [data-theme="dark"] .search-input {
    background: var(--semantic-neutral-bg-medium, #191a1a);
    border-color: var(--semantic-neutral-border-default, #2e3033);
    color: var(--semantic-neutral-text-default, #ffffffd9);
  }
  
  .search-input::placeholder {
    color: var(--color-text-muted, #a1a1aa);
  }
  
  .search-input:focus {
    outline: none;
    border-color: var(--brand-primary, #18181b);
    box-shadow: 0 0 0 3px var(--semantic-focus-ring-primary, rgba(0, 0, 0, 0.1));
  }
  
  .filter-pills {
    display: flex;
    gap: 0.5rem;
  }
  
  .filter-pill {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary, #52525b);
    cursor: pointer;
    transition: all 0.15s ease;
  }
  
  [data-theme="dark"] .filter-pill {
    border-color: var(--semantic-neutral-border-default, #2e3033);
    color: var(--semantic-neutral-text-weak, #ffffffa6);
  }
  
  .filter-pill:hover {
    background: var(--color-surface-secondary, #fafafa);
  }
  
  [data-theme="dark"] .filter-pill:hover {
    background: var(--semantic-neutral-bg-medium, #191a1a);
  }
  
  .filter-pill.active {
    background: var(--brand-primary, #18181b);
    border-color: var(--brand-primary, #18181b);
    color: white;
  }
  
  /* Categories */
  .categories {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
  
  .category-header {
    margin-bottom: 1.5rem;
  }
  
  .category-header h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.375rem;
  }
  
  .category-header p {
    color: var(--color-text-secondary, #52525b);
    font-size: 1rem;
  }
  
  /* Component Grid */
  .component-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }
  
  .component-card {
    display: flex;
    flex-direction: column;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .component-card:hover {
    border-color: var(--brand-primary, #18181b);
    box-shadow: var(--brand-shadow-card, 0 4px 12px rgba(0, 0, 0, 0.08));
    transform: translateY(-2px);
  }
  
  .card-preview {
    height: 140px;
    background: var(--color-surface-secondary, #fafafa);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--color-border-default, #e4e4e7);
  }

  [data-theme="dark"] .card-preview {
    background: #111113;
    border-bottom-color: #27272a;
  }

  .preview-mock {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    width: 100%;
    height: 100%;
  }

  .preview-letter {
    width: 44px;
    height: 44px;
    background: var(--color-surface-tertiary, #e4e4e7);
    color: var(--color-text-muted, #a1a1aa);
    border-radius: var(--brand-radius-card, 12px);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: 700;
  }

  /* ‚îÄ‚îÄ Mock component styles ‚îÄ‚îÄ */
  .mock-btn {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 6px 16px; border-radius: var(--brand-radius-button, 8px);
    font-size: 0.75rem; font-weight: 600; white-space: nowrap;
  }
  .mock-btn.primary {
    background: var(--brand-primary, #18181b); color: #fff;
  }
  .mock-btn.outline {
    background: transparent; color: var(--color-text-primary, #18181b);
    border: 1.5px solid var(--color-border-default, #d4d4d8);
  }
  .mock-button-group { display: flex; gap: 8px; align-items: center; }
  .mock-btn-sm {
    display: inline-flex; align-items: center; gap: 3px;
    padding: 3px 10px; border-radius: var(--brand-radius-button, 6px);
    font-size: 0.625rem; font-weight: 600; white-space: nowrap;
  }
  .mock-btn-sm.primary { background: var(--brand-primary, #18181b); color: #fff; }
  .mock-btn-sm.outline {
    background: transparent; color: var(--color-text-secondary, #52525b);
    border: 1px solid var(--color-border-default, #d4d4d8);
  }
  .caret { font-size: 0.6em; margin-left: 2px; opacity: 0.7; }

  /* Input */
  .mock-input-wrap { display: flex; flex-direction: column; gap: 4px; width: 180px; }
  .mock-label { font-size: 0.6875rem; font-weight: 600; color: var(--color-text-secondary, #52525b); }
  .mock-input {
    display: flex; align-items: center; justify-content: space-between;
    padding: 6px 10px; border: 1.5px solid var(--color-border-default, #d4d4d8);
    border-radius: var(--brand-radius-button, 8px); font-size: 0.6875rem;
    color: var(--color-text-muted, #a1a1aa); background: var(--color-surface-primary, #fff);
  }
  [data-theme="dark"] .mock-input { background: #1a1a1e; border-color: #333; }

  /* Checkbox */
  .mock-check-group { display: flex; flex-direction: column; gap: 6px; }
  .mock-check, .mock-radio {
    display: flex; align-items: center; gap: 6px;
    font-size: 0.6875rem; color: var(--color-text-primary, #18181b);
  }
  .checkmark {
    display: inline-flex; align-items: center; justify-content: center;
    width: 14px; height: 14px; border-radius: 3px;
    background: var(--brand-primary, #18181b); color: #fff;
    font-size: 0.5rem; font-weight: 700;
  }
  .checkbox {
    display: inline-block; width: 14px; height: 14px;
    border: 1.5px solid var(--color-border-default, #d4d4d8); border-radius: 3px;
  }

  /* Radio */
  .radio-dot {
    display: inline-flex; align-items: center; justify-content: center;
    width: 14px; height: 14px; border-radius: 50%;
    border: 1.5px solid var(--brand-primary, #18181b);
  }
  .radio-dot::after {
    content: ''; width: 6px; height: 6px; border-radius: 50%;
    background: var(--brand-primary, #18181b);
  }
  .radio-empty {
    display: inline-block; width: 14px; height: 14px;
    border: 1.5px solid var(--color-border-default, #d4d4d8); border-radius: 50%;
  }

  /* Badge */
  .mock-badge-group { display: flex; gap: 6px; flex-wrap: wrap; justify-content: center; }
  .mock-badge {
    padding: 2px 8px; border-radius: 99px; font-size: 0.625rem;
    font-weight: 600; text-transform: uppercase; letter-spacing: 0.02em;
  }
  .mock-badge.green { background: #dcfce7; color: #166534; }
  .mock-badge.blue { background: #dbeafe; color: #1e40af; }
  .mock-badge.amber { background: #fef3c7; color: #92400e; }
  .mock-badge.red { background: #fee2e2; color: #991b1b; }

  /* Tag */
  .mock-tag-group { display: flex; gap: 6px; }
  .mock-tag {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 3px 8px; border-radius: 6px; font-size: 0.6875rem; font-weight: 500;
    background: var(--color-surface-tertiary, #f4f4f5); color: var(--color-text-primary, #18181b);
  }
  .tag-x { opacity: 0.4; font-size: 0.8em; cursor: pointer; }
  [data-theme="dark"] .mock-tag { background: #27272a; color: #e4e4e7; }

  /* Dropdown */
  .mock-dropdown { position: relative; display: flex; flex-direction: column; align-items: flex-start; }
  .mock-menu {
    display: flex; flex-direction: column; margin-top: 4px;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 8px; overflow: hidden; background: var(--color-surface-primary, #fff);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08); min-width: 120px;
  }
  [data-theme="dark"] .mock-menu { background: #1a1a1e; border-color: #333; }
  .mock-menu-item {
    padding: 5px 10px; font-size: 0.6875rem; color: var(--color-text-primary, #18181b);
  }
  .mock-menu-item.active { background: var(--color-surface-secondary, #f4f4f5); }
  .mock-menu-item.danger { color: #dc2626; }
  .mock-menu-divider { height: 1px; background: var(--color-border-default, #e4e4e7); }
  [data-theme="dark"] .mock-menu-item.active { background: #252527; }

  /* Modal */
  .mock-modal { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
  .mock-modal::before {
    content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.15); border-radius: 0;
  }
  .mock-modal-box {
    position: relative; background: var(--color-surface-primary, #fff);
    border-radius: 10px; padding: 10px; width: 160px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.12); display: flex; flex-direction: column; gap: 6px;
  }
  [data-theme="dark"] .mock-modal-box { background: #1e1e22; }
  .mock-modal-title { font-size: 0.75rem; font-weight: 700; color: var(--color-text-primary, #18181b); }
  .mock-modal-body { height: 16px; border-radius: 4px; background: var(--color-surface-secondary, #f4f4f5); }
  .mock-modal-footer { display: flex; gap: 4px; justify-content: flex-end; }

  /* Drawer */
  .mock-drawer {
    position: relative; width: 100%; height: 100%;
    display: flex; overflow: hidden;
  }
  .mock-drawer-backdrop { flex: 1; background: rgba(0,0,0,0.08); }
  .mock-drawer-panel {
    width: 120px; background: var(--color-surface-primary, #fff);
    border-left: 1px solid var(--color-border-default, #e4e4e7);
    padding: 12px; display: flex; flex-direction: column; gap: 8px;
  }
  [data-theme="dark"] .mock-drawer-panel { background: #1e1e22; border-color: #333; }
  .mock-drawer-title { font-size: 0.6875rem; font-weight: 700; color: var(--color-text-primary, #18181b); }
  .mock-drawer-line {
    height: 6px; border-radius: 3px; background: var(--color-surface-tertiary, #e4e4e7);
  }
  .mock-drawer-line.short { width: 60%; }
  [data-theme="dark"] .mock-drawer-line { background: #333; }

  /* Tooltip */
  .mock-tooltip-wrap {
    display: flex; flex-direction: column; align-items: center; gap: 6px;
  }
  .mock-tooltip-trigger {
    font-size: 0.6875rem; color: var(--color-text-secondary, #52525b);
    border-bottom: 1px dashed var(--color-border-default, #d4d4d8);
    padding-bottom: 1px;
  }
  .mock-tooltip-bubble {
    padding: 4px 10px; border-radius: 6px; font-size: 0.625rem;
    background: #18181b; color: #fff; white-space: nowrap;
  }
  .mock-popover-bubble {
    padding: 8px 10px; border-radius: 8px; font-size: 0.625rem;
    background: var(--color-surface-primary, #fff); color: var(--color-text-primary, #18181b);
    border: 1px solid var(--color-border-default, #e4e4e7);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: flex; flex-direction: column; gap: 4px;
    min-width: 100px;
  }
  [data-theme="dark"] .mock-popover-bubble { background: #1e1e22; border-color: #333; }
  .mock-popover-title { font-size: 0.6875rem; font-weight: 700; }

  /* Icon */
  .mock-icon-group { display: flex; gap: 12px; align-items: center; }
  .mock-icon {
    font-size: 1.25rem; color: var(--brand-primary, #18181b); opacity: 0.7;
  }

  /* Divider */
  .mock-divider-wrap { display: flex; flex-direction: column; gap: 8px; width: 160px; align-items: stretch; }
  .mock-divider-line { height: 1.5px; background: var(--color-border-default, #d4d4d8); }

  /* Details */
  .mock-details { display: flex; flex-direction: column; gap: 4px; width: 180px; }
  .mock-details-summary {
    font-size: 0.6875rem; font-weight: 600; color: var(--color-text-secondary, #52525b);
    padding: 4px 0; border-bottom: 1px solid var(--color-border-default, #e4e4e7);
  }
  .mock-details-open {
    font-size: 0.6875rem; font-weight: 600; color: var(--brand-primary, #18181b);
    padding: 4px 0;
  }
  .mock-details-content {
    display: flex; flex-direction: column; gap: 4px; padding-left: 12px;
  }

  /* Toast */
  .mock-toast {
    display: flex; align-items: center; gap: 8px;
    padding: 8px 14px; border-radius: 8px;
    background: #166534; color: #fff; font-size: 0.6875rem; font-weight: 500;
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
  }
  .mock-toast-icon { font-size: 0.75rem; }

  /* Toggle */
  .mock-toggle-group { display: flex; gap: 12px; align-items: center; }
  .mock-toggle {
    width: 36px; height: 20px; border-radius: 99px; position: relative;
    transition: background 0.2s;
  }
  .mock-toggle.on { background: var(--brand-primary, #18181b); }
  .mock-toggle.off { background: var(--color-border-default, #d4d4d8); }
  .toggle-knob {
    position: absolute; top: 2px; width: 16px; height: 16px;
    border-radius: 50%; background: #fff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    transition: left 0.2s;
  }
  .mock-toggle.on .toggle-knob { left: 18px; }
  .mock-toggle.off .toggle-knob { left: 2px; }
  
  .card-content {
    padding: 1rem;
  }
  
  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }
  
  .card-header h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary, #18181b);
  }
  
  .status-badge {
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .storybook-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-top: 0.375rem;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.625rem;
    font-weight: 600;
    background: #fff0f5;
    color: #ff4785;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    width: fit-content;
  }

  [data-theme="dark"] .storybook-badge {
    background: rgba(255, 71, 133, 0.15);
  }
  
  .card-content p {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #52525b);
    margin: 0;
    line-height: 1.5;
  }
  
  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 16px;
  }
  
  .empty-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }
  
  .empty-state h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .empty-state p {
    color: var(--color-text-secondary, #52525b);
  }
  
  /* Contribution Section */
  .contribution-section {
    text-align: center;
    padding: 3rem 2rem;
    background: linear-gradient(135deg, #f5f3ff 0%, #fdf4ff 100%);
    border-radius: 16px;
  }
  
  .contribution-section h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
  }
  
  .contribution-section p {
    color: var(--color-text-secondary, #52525b);
    margin-bottom: 1.5rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .contribution-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  
  .contribution-btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-size: 0.9375rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.15s ease;
  }
  
  .contribution-btn.primary {
    background: var(--brand-primary, #18181b);
    color: white;
    border-radius: var(--brand-radius-button, 8px);
  }
  
  .contribution-btn.primary:hover {
    background: var(--brand-primary-hover, #27272a);
  }
  
  .contribution-btn.secondary {
    background: white;
    color: var(--color-text-primary, #18181b);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: var(--brand-radius-button, 8px);
  }
  
  .contribution-btn.secondary:hover {
    border-color: var(--brand-primary, #18181b);
    color: var(--brand-primary, #18181b);
  }
</style>
