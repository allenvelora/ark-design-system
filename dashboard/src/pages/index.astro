---
import Layout from '../layouts/Layout.astro';
import fs from 'node:fs';
import path from 'node:path';

// Load component index
const indexPath = path.join(process.cwd(), 'src', 'data', 'components', 'index.json');
let componentData = { categories: [], components: [] };

try {
  componentData = JSON.parse(fs.readFileSync(indexPath, 'utf-8'));
} catch (e) {
  console.warn('Components index not found');
}

// Status badge colors
const statusConfig = {
  stable: { bg: '#dcfce7', text: '#166534', label: 'Stable' },
  beta: { bg: '#fef3c7', text: '#92400e', label: 'Beta' },
  draft: { bg: '#e0e7ff', text: '#3730a3', label: 'Draft' },
  deprecated: { bg: '#fee2e2', text: '#991b1b', label: 'Deprecated' }
};

// Group components by category
const componentsByCategory = componentData.categories.map(category => ({
  ...category,
  items: componentData.components.filter(c => c.category === category.id)
}));

// Stats
const totalComponents = componentData.components.length;
const stableComponents = componentData.components.filter(c => c.status === 'stable').length;
const draftComponents = componentData.components.filter(c => c.status === 'draft').length;

// Component preview illustrations (mini wireframe SVGs)
const componentPreviews: Record<string, string> = {
  'button': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="10" y="8" width="100" height="32" rx="8" fill="currentColor" opacity="0.15"/>
    <rect x="10" y="8" width="100" height="32" rx="8" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <text x="60" y="28" text-anchor="middle" font-size="12" font-weight="600" fill="currentColor" opacity="0.7">Button</text>
  </svg>`,
  'dropdown': `<svg viewBox="0 0 120 60" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="10" y="4" width="100" height="16" rx="4" stroke="currentColor" stroke-width="1.2" opacity="0.4"/>
    <path d="M96 10l4 4 4-4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" opacity="0.5"/>
    <rect x="10" y="24" width="100" height="32" rx="4" fill="currentColor" opacity="0.08" stroke="currentColor" stroke-width="1" opacity="0.2"/>
    <line x1="18" y1="33" x2="80" y2="33" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <line x1="18" y1="41" x2="70" y2="41" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <line x1="18" y1="49" x2="75" y2="49" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
  </svg>`,
  'input': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="8" width="104" height="32" rx="6" stroke="currentColor" stroke-width="1.5" opacity="0.35"/>
    <line x1="16" y1="16" x2="16" y2="32" stroke="currentColor" stroke-width="1.5" opacity="0.5"/>
    <text x="22" y="28" font-size="10" fill="currentColor" opacity="0.25">Type here...</text>
  </svg>`,
  'select': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="8" width="104" height="32" rx="6" stroke="currentColor" stroke-width="1.5" opacity="0.35"/>
    <text x="20" y="28" font-size="10" fill="currentColor" opacity="0.35">Select option</text>
    <path d="M98 20l4 5 4-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.4"/>
  </svg>`,
  'checkbox': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="14" y="10" width="16" height="16" rx="4" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <path d="M18 18l3 3 5-6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" opacity="0.5"/>
    <line x1="38" y1="18" x2="90" y2="18" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <rect x="14" y="32" width="16" height="16" rx="4" stroke="currentColor" stroke-width="1.5" opacity="0.25"/>
    <line x1="38" y1="40" x2="80" y2="40" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
  </svg>`,
  'radio': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="22" cy="16" r="7" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <circle cx="22" cy="16" r="3.5" fill="currentColor" opacity="0.5"/>
    <line x1="38" y1="16" x2="90" y2="16" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <circle cx="22" cy="34" r="7" stroke="currentColor" stroke-width="1.5" opacity="0.25"/>
    <line x1="38" y1="34" x2="80" y2="34" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
  </svg>`,
  'radiogroup': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="12" r="6" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <circle cx="20" cy="12" r="3" fill="currentColor" opacity="0.5"/>
    <line x1="32" y1="12" x2="80" y2="12" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <circle cx="20" cy="28" r="6" stroke="currentColor" stroke-width="1.5" opacity="0.25"/>
    <line x1="32" y1="28" x2="72" y2="28" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <circle cx="20" cy="44" r="6" stroke="currentColor" stroke-width="1.5" opacity="0.25"/>
    <line x1="32" y1="44" x2="76" y2="44" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
  </svg>`,
  'toggle': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="30" y="12" width="44" height="24" rx="12" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <circle cx="62" cy="24" r="9" fill="currentColor" opacity="0.4"/>
  </svg>`,
  'textarea': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="4" width="104" height="48" rx="6" stroke="currentColor" stroke-width="1.5" opacity="0.35"/>
    <line x1="16" y1="14" x2="80" y2="14" stroke="currentColor" stroke-width="1.2" opacity="0.2" stroke-linecap="round"/>
    <line x1="16" y1="22" x2="70" y2="22" stroke="currentColor" stroke-width="1.2" opacity="0.2" stroke-linecap="round"/>
    <line x1="16" y1="30" x2="75" y2="30" stroke="currentColor" stroke-width="1.2" opacity="0.2" stroke-linecap="round"/>
    <path d="M100 44l6 6m0-6l-6 6" stroke="currentColor" stroke-width="1.2" opacity="0.2" stroke-linecap="round"/>
  </svg>`,
  'typeahead-single-select': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="4" width="104" height="16" rx="4" stroke="currentColor" stroke-width="1.2" opacity="0.35"/>
    <circle cx="18" cy="12" r="4" stroke="currentColor" stroke-width="1" opacity="0.3"/>
    <line x1="21" y1="15" x2="24" y2="18" stroke="currentColor" stroke-width="1" opacity="0.3" stroke-linecap="round"/>
    <rect x="8" y="24" width="104" height="28" rx="4" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1" opacity="0.15"/>
    <line x1="16" y1="33" x2="70" y2="33" stroke="currentColor" stroke-width="1.2" opacity="0.25" stroke-linecap="round"/>
    <line x1="16" y1="41" x2="60" y2="41" stroke="currentColor" stroke-width="1.2" opacity="0.25" stroke-linecap="round"/>
  </svg>`,
  'typeahead-multi-select': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="4" width="104" height="20" rx="4" stroke="currentColor" stroke-width="1.2" opacity="0.35"/>
    <rect x="14" y="9" width="28" height="10" rx="5" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="0.8" opacity="0.3"/>
    <rect x="46" y="9" width="24" height="10" rx="5" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="0.8" opacity="0.3"/>
    <rect x="8" y="28" width="104" height="24" rx="4" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1" opacity="0.15"/>
    <line x1="16" y1="36" x2="65" y2="36" stroke="currentColor" stroke-width="1.2" opacity="0.25" stroke-linecap="round"/>
    <line x1="16" y1="44" x2="55" y2="44" stroke="currentColor" stroke-width="1.2" opacity="0.25" stroke-linecap="round"/>
  </svg>`,
  'card': `<svg viewBox="0 0 120 60" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="16" y="4" width="88" height="52" rx="8" stroke="currentColor" stroke-width="1.5" opacity="0.3" fill="currentColor" fill-opacity="0.04"/>
    <rect x="24" y="12" width="72" height="16" rx="4" fill="currentColor" opacity="0.08"/>
    <line x1="24" y1="36" x2="72" y2="36" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
    <line x1="24" y1="44" x2="60" y2="44" stroke="currentColor" stroke-width="1.5" opacity="0.15" stroke-linecap="round"/>
  </svg>`,
  'modal': `<svg viewBox="0 0 120 64" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="4" y="4" width="112" height="56" rx="2" fill="currentColor" opacity="0.06"/>
    <rect x="20" y="10" width="80" height="44" rx="8" fill="white" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <line x1="28" y1="20" x2="64" y2="20" stroke="currentColor" stroke-width="1.5" opacity="0.3" stroke-linecap="round"/>
    <line x1="28" y1="28" x2="80" y2="28" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <path d="M88 14l4 4m0-4l-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.3"/>
    <rect x="60" y="40" width="32" height="10" rx="5" fill="currentColor" opacity="0.15"/>
  </svg>`,
  'drawer': `<svg viewBox="0 0 120 64" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="4" y="4" width="112" height="56" rx="2" fill="currentColor" opacity="0.06"/>
    <rect x="48" y="4" width="68" height="56" rx="0" fill="white" stroke="currentColor" stroke-width="1.5" opacity="0.35"/>
    <line x1="56" y1="14" x2="90" y2="14" stroke="currentColor" stroke-width="1.5" opacity="0.3" stroke-linecap="round"/>
    <line x1="56" y1="24" x2="105" y2="24" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <line x1="56" y1="32" x2="95" y2="32" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <path d="M106 10l4 4m0-4l-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.3"/>
  </svg>`,
  'details': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="10" y="4" width="100" height="18" rx="4" stroke="currentColor" stroke-width="1.2" opacity="0.35"/>
    <path d="M20 11l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.4"/>
    <line x1="32" y1="13" x2="80" y2="13" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <rect x="10" y="24" width="100" height="28" rx="4" fill="currentColor" opacity="0.05" stroke="currentColor" stroke-width="1" opacity="0.15"/>
    <line x1="20" y1="33" x2="90" y2="33" stroke="currentColor" stroke-width="1" opacity="0.2" stroke-linecap="round"/>
    <line x1="20" y1="41" x2="80" y2="41" stroke="currentColor" stroke-width="1" opacity="0.2" stroke-linecap="round"/>
  </svg>`,
  'tabs': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="10" y1="20" x2="110" y2="20" stroke="currentColor" stroke-width="1" opacity="0.2"/>
    <line x1="14" y1="14" x2="38" y2="14" stroke="currentColor" stroke-width="2" opacity="0.5" stroke-linecap="round"/>
    <line x1="14" y1="20" x2="38" y2="20" stroke="currentColor" stroke-width="2" opacity="0.5"/>
    <line x1="46" y1="14" x2="66" y2="14" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
    <line x1="74" y1="14" x2="94" y2="14" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
    <line x1="14" y1="30" x2="90" y2="30" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <line x1="14" y1="38" x2="70" y2="38" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
  </svg>`,
  'divider': `<svg viewBox="0 0 120 32" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="16" y1="8" x2="80" y2="8" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
    <line x1="10" y1="16" x2="110" y2="16" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
    <line x1="16" y1="24" x2="70" y2="24" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
  </svg>`,
  'toast': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="12" y="10" width="96" height="28" rx="8" fill="currentColor" opacity="0.08" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <circle cx="28" cy="24" r="6" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1" opacity="0.3"/>
    <path d="M26 24l2 2 4-4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" opacity="0.4"/>
    <line x1="40" y1="20" x2="80" y2="20" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <line x1="40" y1="28" x2="68" y2="28" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <path d="M96 18l4 4m0-4l-4 4" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" opacity="0.25"/>
  </svg>`,
  'alert': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="8" width="104" height="32" rx="6" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1.2" opacity="0.25"/>
    <circle cx="24" cy="24" r="7" stroke="currentColor" stroke-width="1.5" opacity="0.35"/>
    <line x1="24" y1="20" x2="24" y2="25" stroke="currentColor" stroke-width="1.5" opacity="0.35" stroke-linecap="round"/>
    <circle cx="24" cy="28" r="1" fill="currentColor" opacity="0.35"/>
    <line x1="38" y1="20" x2="90" y2="20" stroke="currentColor" stroke-width="1.5" opacity="0.2" stroke-linecap="round"/>
    <line x1="38" y1="28" x2="76" y2="28" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
  </svg>`,
  'badge': `<svg viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="12" y="8" width="40" height="10" rx="5" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1" opacity="0.3"/>
    <rect x="58" y="8" width="32" height="10" rx="5" fill="currentColor" opacity="0.1"/>
    <rect x="20" y="24" width="48" height="10" rx="5" fill="currentColor" opacity="0.1"/>
    <rect x="74" y="24" width="28" height="10" rx="5" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1" opacity="0.3"/>
  </svg>`,
  'tag': `<svg viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="10" y="10" width="44" height="10" rx="5" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="0.8" opacity="0.3"/>
    <path d="M48 13l2 2m0-2l-2 2" stroke="currentColor" stroke-width="1" stroke-linecap="round" opacity="0.3"/>
    <rect x="60" y="10" width="36" height="10" rx="5" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="0.8" opacity="0.3"/>
    <rect x="24" y="24" width="50" height="10" rx="5" fill="currentColor" opacity="0.08"/>
  </svg>`,
  'avatar': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="36" cy="24" r="14" fill="currentColor" opacity="0.1" stroke="currentColor" stroke-width="1.5" opacity="0.3"/>
    <circle cx="36" cy="20" r="5" fill="currentColor" opacity="0.2"/>
    <path d="M26 33c0-5.5 4.5-8 10-8s10 2.5 10 8" fill="currentColor" opacity="0.15"/>
    <circle cx="68" cy="24" r="10" fill="currentColor" opacity="0.08" stroke="currentColor" stroke-width="1.2" opacity="0.2"/>
    <circle cx="92" cy="24" r="8" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1" opacity="0.15"/>
  </svg>`,
  'icon': `<svg viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M30 12l-8 12h16z" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1.2" opacity="0.35"/>
    <circle cx="52" cy="18" r="8" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <rect x="68" y="10" width="16" height="16" rx="3" fill="currentColor" opacity="0.1" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <path d="M96 12l4 8 4-8m-8 0h8" stroke="currentColor" stroke-width="1.2" opacity="0.3" stroke-linecap="round"/>
    <line x1="20" y1="36" x2="100" y2="36" stroke="currentColor" stroke-width="1" opacity="0.1" stroke-linecap="round"/>
  </svg>`,
  'tooltip': `<svg viewBox="0 0 120 52" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="24" y="6" width="72" height="24" rx="6" fill="currentColor" opacity="0.12" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <path d="M56 30l4 6 4-6" fill="currentColor" opacity="0.12"/>
    <line x1="34" y1="15" x2="86" y2="15" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <line x1="34" y1="23" x2="72" y2="23" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <circle cx="60" cy="44" r="4" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1" opacity="0.25"/>
  </svg>`,
  'popover': `<svg viewBox="0 0 120 60" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="14" y="4" width="92" height="36" rx="8" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1.2" opacity="0.3"/>
    <path d="M56 40l4 6 4-6" fill="currentColor" opacity="0.1"/>
    <line x1="24" y1="14" x2="68" y2="14" stroke="currentColor" stroke-width="1.5" opacity="0.25" stroke-linecap="round"/>
    <line x1="24" y1="22" x2="90" y2="22" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <rect x="24" y="28" width="32" height="8" rx="4" fill="currentColor" opacity="0.1"/>
    <rect x="60" y="28" width="32" height="8" rx="4" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="0.8" opacity="0.25"/>
    <rect x="46" y="50" width="28" height="8" rx="4" fill="currentColor" opacity="0.2"/>
  </svg>`,
  'popup': `<svg viewBox="0 0 120 56" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="20" y="6" width="80" height="30" rx="6" fill="currentColor" opacity="0.06" stroke="currentColor" stroke-width="1.2" opacity="0.25"/>
    <line x1="30" y1="16" x2="80" y2="16" stroke="currentColor" stroke-width="1.2" opacity="0.2" stroke-linecap="round"/>
    <line x1="30" y1="24" x2="70" y2="24" stroke="currentColor" stroke-width="1" opacity="0.15" stroke-linecap="round"/>
    <rect x="42" y="42" width="36" height="10" rx="5" fill="currentColor" opacity="0.15" stroke="currentColor" stroke-width="1" opacity="0.3"/>
  </svg>`,
  'link': `<svg viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="30" y1="22" x2="70" y2="22" stroke="currentColor" stroke-width="2" opacity="0.4" stroke-linecap="round"/>
    <line x1="30" y1="25" x2="70" y2="25" stroke="currentColor" stroke-width="0.8" opacity="0.3"/>
    <path d="M72 16l6 6-6 6" stroke="currentColor" stroke-width="1.5" opacity="0.3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,
};
---

<Layout title="Components">
  <div class="components-page">
    <!-- Hero Section -->
    <header class="page-hero">
      <div class="hero-content">
        <h1>Components</h1>
        <p class="hero-description">
          A comprehensive library of reusable UI components designed for consistency, 
          accessibility, and flexibility across all products.
        </p>
        
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="stat-value">{totalComponents}</span>
            <span class="stat-label">Components</span>
          </div>
          <div class="hero-stat">
            <span class="stat-value">{stableComponents}</span>
            <span class="stat-label">Stable</span>
          </div>
          <div class="hero-stat">
            <span class="stat-value">{draftComponents}</span>
            <span class="stat-label">In Progress</span>
          </div>
        </div>
      </div>
      
      <div class="hero-visual">
        <div class="visual-grid">
          <div class="visual-item">
            <div class="visual-button">Button</div>
          </div>
          <div class="visual-item">
            <div class="visual-input" data-placeholder="Input field"></div>
          </div>
          <div class="visual-item">
            <div class="visual-toggle"></div>
          </div>
          <div class="visual-item">
            <div class="visual-card"></div>
          </div>
        </div>
      </div>
    </header>
    
    <!-- Quick Start -->
    <section class="quick-start">
      <h2>Quick Start</h2>
      <div class="quick-start-cards">
        <a href="/tokens" class="quick-card">
          <div class="quick-icon">üé®</div>
          <h3>Design Tokens</h3>
          <p>Explore colors, typography, spacing, and other foundational values</p>
        </a>
        <a href="/decisions" class="quick-card">
          <div class="quick-icon">üß≠</div>
          <h3>Decision Trees</h3>
          <p>Interactive guides to help you choose the right component</p>
        </a>
        <a href="/docs" class="quick-card">
          <div class="quick-icon">üìö</div>
          <h3>Documentation</h3>
          <p>Implementation guides, patterns, and best practices</p>
        </a>
      </div>
    </section>
    
    <!-- Search & Filter (Sticky on scroll) -->
    <div class="search-section-wrapper" id="search-wrapper">
      <section class="search-section" id="search-section">
        <input 
          type="search" 
          id="component-search"
          placeholder="Search components..."
          class="search-input"
        />
        
        <div class="filter-pills">
          <button class="filter-pill active" data-filter="all">All</button>
          <button class="filter-pill" data-filter="stable">Stable</button>
          <button class="filter-pill" data-filter="draft">In Progress</button>
        </div>
      </section>
    </div>
    
    <!-- Component Categories -->
    <div class="categories">
      {componentsByCategory.map(category => (
        <section class="category-section" data-category={category.id}>
          <div class="category-header">
            <h2>{category.name}</h2>
            <p>{category.description}</p>
          </div>
          
          <div class="component-grid">
            {category.items.map(component => {
              const status = statusConfig[component.status] || statusConfig.draft;
              return (
                <a href={`/components/${component.id}`} class="component-card" data-status={component.status}>
                  <div class="card-preview">
                    {componentPreviews[component.id] ? (
                      <div class="preview-illustration" set:html={componentPreviews[component.id]} />
                    ) : (
                      <span class="preview-placeholder">{component.name[0]}</span>
                    )}
                  </div>
                  <div class="card-content">
                    <div class="card-header">
                      <h3>{component.name}</h3>
                      <span 
                        class="status-badge" 
                        style={`background: ${status.bg}; color: ${status.text}`}
                      >
                        {status.label}
                      </span>
                    </div>
                    <p>{component.description}</p>
                    {component.storybook && (
                      <span class="storybook-badge">
                        <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" style="flex-shrink: 0;">
                          <path d="M16.34 2.004l-.354-1.953-.01-.001a.498.498 0 0 0-.553.428l-.247 1.489-1.084-.126a.5.5 0 0 0-.116.993l1.02.119-.36 2.169a.5.5 0 0 0 .985.163l.396-2.388L20.4 3.52a.502.502 0 0 0 .415-.572.5.5 0 0 0-.572-.415l-3.903-.529zM14.5 8.5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4.5 4.5c0 4.418-3.582 8-8 8s-8-3.582-8-8c0-4.418 3.582-8 8-8a7.96 7.96 0 0 1 4.897 1.688l-.003.003A7.963 7.963 0 0 1 19 13z"/>
                        </svg>
                        Storybook
                      </span>
                    )}
                  </div>
                </a>
              );
            })}
          </div>
        </section>
      ))}
    </div>
    
    <!-- Empty State (shown when no results) -->
    <div class="empty-state" id="empty-state" style="display: none;">
      <div class="empty-icon">üîç</div>
      <h3>No components found</h3>
      <p>Try adjusting your search or filter criteria</p>
    </div>
    
    <!-- Contribution CTA -->
    <section class="contribution-section">
      <h2>Want to contribute?</h2>
      <p>
        Have a component request or found an issue? 
        We welcome contributions from all teams.
      </p>
      <div class="contribution-actions">
        <a href="https://github.com/ark-design/components/issues/new" class="contribution-btn primary">
          Request Component
        </a>
        <a href="/docs/contributing" class="contribution-btn secondary">
          Contribution Guide
        </a>
      </div>
    </section>
  </div>
</Layout>

<script>
  const searchInput = document.getElementById('component-search') as HTMLInputElement;
  const filterPills = document.querySelectorAll('.filter-pill');
  const componentCards = document.querySelectorAll('.component-card');
  const categorySections = document.querySelectorAll('.category-section');
  const emptyState = document.getElementById('empty-state');
  
  let activeFilter = 'all';
  
  function applyFilters() {
    const searchQuery = searchInput?.value.toLowerCase() || '';
    let visibleCount = 0;
    
    componentCards.forEach(card => {
      const cardStatus = card.getAttribute('data-status');
      const cardText = card.textContent?.toLowerCase() || '';
      
      const matchesSearch = searchQuery === '' || cardText.includes(searchQuery);
      const matchesFilter = activeFilter === 'all' || cardStatus === activeFilter;
      
      const isVisible = matchesSearch && matchesFilter;
      (card as HTMLElement).style.display = isVisible ? '' : 'none';
      
      if (isVisible) visibleCount++;
    });
    
    // Hide empty categories
    categorySections.forEach(section => {
      const visibleCards = section.querySelectorAll('.component-card:not([style*="display: none"])');
      (section as HTMLElement).style.display = visibleCards.length > 0 ? '' : 'none';
    });
    
    // Show/hide empty state
    if (emptyState) {
      emptyState.style.display = visibleCount === 0 ? 'block' : 'none';
    }
  }
  
  searchInput?.addEventListener('input', applyFilters);
  
  filterPills.forEach(pill => {
    pill.addEventListener('click', () => {
      activeFilter = pill.getAttribute('data-filter') || 'all';
      filterPills.forEach(p => p.classList.remove('active'));
      pill.classList.add('active');
      applyFilters();
    });
  });
  
  // Sticky search bar behavior (Airbnb-style)
  const searchWrapper = document.getElementById('search-wrapper');
  const quickStartSection = document.querySelector('.quick-start');
  
  if (searchWrapper && quickStartSection) {
    // Create a sentinel element to detect when to make search bar sticky
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          // When quick-start section leaves the viewport, make search sticky
          if (!entry.isIntersecting) {
            searchWrapper.classList.add('is-stuck');
          } else {
            searchWrapper.classList.remove('is-stuck');
          }
        });
      },
      {
        // Trigger when quick-start bottom edge passes the sticky position (68px from top)
        rootMargin: '-68px 0px 0px 0px',
        threshold: 0
      }
    );
    
    observer.observe(quickStartSection);
  }
</script>

<style>
  .components-page {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
  
  /* Hero Section */
  .page-hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
    padding: 2rem 0;
  }
  
  @media (max-width: 768px) {
    .page-hero {
      grid-template-columns: 1fr;
    }
    
    .hero-visual {
      display: none;
    }
  }
  
  .hero-content h1 {
    font-size: 3rem;
    font-weight: 800;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--brand-primary, #18181b) 0%, var(--brand-accent, #52525b) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .hero-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary, #52525b);
    line-height: 1.7;
    margin-bottom: 2rem;
  }
  
  .hero-stats {
    display: flex;
    gap: 2rem;
  }
  
  .hero-stat {
    display: flex;
    flex-direction: column;
  }
  
  .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-primary, #18181b);
  }
  
  .stat-label {
    font-size: 0.875rem;
    color: var(--color-text-muted, #71717a);
  }
  
  .hero-visual {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .visual-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    transform: rotate(-5deg);
  }
  
  .visual-item {
    padding: 1rem;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }
  
  .visual-button {
    padding: 0.625rem 1.25rem;
    background: var(--brand-primary, #18181b);
    color: white;
    border-radius: var(--brand-radius-button, 8px);
    font-weight: 500;
    font-size: 0.875rem;
    text-align: center;
  }
  
  .visual-input {
    padding: 0.625rem 1rem;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 8px;
    color: var(--color-text-muted, #a1a1aa);
    font-size: 0.875rem;
  }
  
  .visual-input::before {
    content: attr(data-placeholder);
  }
  
  .visual-toggle {
    width: 44px;
    height: 24px;
    background: var(--brand-primary, #18181b);
    border-radius: 12px;
    position: relative;
  }
  
  .visual-toggle::after {
    content: '';
    position: absolute;
    right: 2px;
    top: 2px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
  }
  
  .visual-card {
    width: 80px;
    height: 60px;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 8px;
    position: relative;
  }
  
  .visual-card::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    height: 8px;
    background: var(--color-border-default, #e4e4e7);
    border-radius: 4px;
  }
  
  /* Quick Start */
  .quick-start {
    padding: 2rem;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 16px;
  }
  
  .quick-start h2 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .quick-start-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  
  @media (max-width: 640px) {
    .quick-start-cards {
      grid-template-columns: 1fr;
    }
  }
  
  .quick-card {
    display: block;
    padding: 1.25rem;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .quick-card:hover {
    border-color: var(--brand-primary, #18181b);
    box-shadow: var(--brand-shadow-card, 0 4px 12px rgba(0, 0, 0, 0.08));
    transform: translateY(-2px);
  }
  
  .quick-icon {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .quick-card h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary, #18181b);
    margin-bottom: 0.375rem;
  }
  
  .quick-card p {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #52525b);
    margin: 0;
    line-height: 1.5;
  }
  
  /* Search Section - Sticky on scroll */
  .search-section-wrapper {
    position: sticky;
    top: 68px; /* Below the main header */
    z-index: 90;
    margin: 0 -1.5rem; /* Extend to edges */
    padding: 0.75rem 1.5rem;
    background: var(--color-surface-primary, #fff);
    transition: all 0.2s ease;
  }
  
  .search-section-wrapper.is-stuck {
    background: var(--color-surface-primary, #fff);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid var(--color-border-default, #e4e4e7);
  }
  
  [data-theme="dark"] .search-section-wrapper.is-stuck {
    background: var(--semantic-neutral-bg-default, #000);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border-bottom-color: var(--semantic-neutral-border-default, #2e3033);
  }
  
  .search-section {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    max-width: 1280px;
    margin: 0 auto;
  }
  
  .search-input {
    flex: 1;
    min-width: 200px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: var(--brand-radius-button, 8px);
    background: var(--color-surface-primary, #fff);
    color: var(--color-text-primary, #18181b);
    transition: all 0.15s ease;
  }
  
  [data-theme="dark"] .search-input {
    background: var(--semantic-neutral-bg-medium, #191a1a);
    border-color: var(--semantic-neutral-border-default, #2e3033);
    color: var(--semantic-neutral-text-default, #ffffffd9);
  }
  
  .search-input::placeholder {
    color: var(--color-text-muted, #a1a1aa);
  }
  
  .search-input:focus {
    outline: none;
    border-color: var(--brand-primary, #18181b);
    box-shadow: 0 0 0 3px var(--semantic-focus-ring-primary, rgba(0, 0, 0, 0.1));
  }
  
  .filter-pills {
    display: flex;
    gap: 0.5rem;
  }
  
  .filter-pill {
    padding: 0.5rem 1rem;
    background: transparent;
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text-secondary, #52525b);
    cursor: pointer;
    transition: all 0.15s ease;
  }
  
  [data-theme="dark"] .filter-pill {
    border-color: var(--semantic-neutral-border-default, #2e3033);
    color: var(--semantic-neutral-text-weak, #ffffffa6);
  }
  
  .filter-pill:hover {
    background: var(--color-surface-secondary, #fafafa);
  }
  
  [data-theme="dark"] .filter-pill:hover {
    background: var(--semantic-neutral-bg-medium, #191a1a);
  }
  
  .filter-pill.active {
    background: var(--brand-primary, #18181b);
    border-color: var(--brand-primary, #18181b);
    color: white;
  }
  
  /* Categories */
  .categories {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
  
  .category-header {
    margin-bottom: 1.5rem;
  }
  
  .category-header h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.375rem;
  }
  
  .category-header p {
    color: var(--color-text-secondary, #52525b);
    font-size: 1rem;
  }
  
  /* Component Grid */
  .component-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }
  
  .component-card {
    display: flex;
    flex-direction: column;
    background: var(--color-surface-primary, #fff);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: 12px;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .component-card:hover {
    border-color: var(--brand-primary, #18181b);
    box-shadow: var(--brand-shadow-card, 0 4px 12px rgba(0, 0, 0, 0.08));
    transform: translateY(-2px);
  }
  
  .card-preview {
    height: 100px;
    background: linear-gradient(135deg, var(--color-surface-secondary, #fafafa) 0%, var(--color-surface-tertiary, #f4f4f5) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1rem;
    color: var(--brand-primary, #18181b);
    transition: all 0.2s ease;
  }

  .component-card:hover .card-preview {
    background: linear-gradient(135deg, var(--color-surface-tertiary, #f4f4f5) 0%, var(--color-surface-secondary, #fafafa) 100%);
  }

  .preview-illustration {
    width: 100%;
    max-width: 160px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .preview-illustration svg {
    width: 100%;
    height: 100%;
    color: inherit;
  }
  
  .preview-placeholder {
    width: 44px;
    height: 44px;
    background: var(--brand-primary, #18181b);
    color: white;
    border-radius: var(--brand-radius-card, 12px);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: 700;
    opacity: 0.8;
  }

  [data-theme="dark"] .card-preview {
    color: var(--color-text-secondary, #a1a1aa);
  }
  
  .card-content {
    padding: 1rem;
  }
  
  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }
  
  .card-header h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary, #18181b);
  }
  
  .status-badge {
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .storybook-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-top: 0.375rem;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.625rem;
    font-weight: 600;
    background: #fff0f5;
    color: #ff4785;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    width: fit-content;
  }

  [data-theme="dark"] .storybook-badge {
    background: rgba(255, 71, 133, 0.15);
  }
  
  .card-content p {
    font-size: 0.875rem;
    color: var(--color-text-secondary, #52525b);
    margin: 0;
    line-height: 1.5;
  }
  
  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: var(--color-surface-secondary, #fafafa);
    border-radius: 16px;
  }
  
  .empty-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }
  
  .empty-state h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .empty-state p {
    color: var(--color-text-secondary, #52525b);
  }
  
  /* Contribution Section */
  .contribution-section {
    text-align: center;
    padding: 3rem 2rem;
    background: linear-gradient(135deg, #f5f3ff 0%, #fdf4ff 100%);
    border-radius: 16px;
  }
  
  .contribution-section h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
  }
  
  .contribution-section p {
    color: var(--color-text-secondary, #52525b);
    margin-bottom: 1.5rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .contribution-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  
  .contribution-btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-size: 0.9375rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.15s ease;
  }
  
  .contribution-btn.primary {
    background: var(--brand-primary, #18181b);
    color: white;
    border-radius: var(--brand-radius-button, 8px);
  }
  
  .contribution-btn.primary:hover {
    background: var(--brand-primary-hover, #27272a);
  }
  
  .contribution-btn.secondary {
    background: white;
    color: var(--color-text-primary, #18181b);
    border: 1px solid var(--color-border-default, #e4e4e7);
    border-radius: var(--brand-radius-button, 8px);
  }
  
  .contribution-btn.secondary:hover {
    border-color: var(--brand-primary, #18181b);
    color: var(--brand-primary, #18181b);
  }
</style>
